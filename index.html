<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title></title>
<style>
a:link {
  color: green;
  background-color: transparent;
  text-decoration: none;
}
a:visited {
  color: chartreuse;
  background-color: transparent;
  text-decoration: none;
}
a:hover {
  color: red;
  background-color: transparent;
  text-decoration: underline;
}
a:active {
  color: yellow;
  background-color: transparent;
  text-decoration: underline;
}
        .myButton {
                box-shadow: 0px 10px 14px -7px #276873;
                background:linear-gradient(to bottom, #589bbe 5%, #408c99 100%);
                background-color:#599bb3;
                border-radius:8px;
                display:inline-block;
                cursor:pointer;
                color:#ffffff;
                font-family:Arial;
                font-size:14px;
                font-weight:bold;
                padding:3px 12px;
                text-decoration:none;
                text-shadow:0px 1px 0px #3d768a;
        }
        .myButton:hover {
                background:linear-gradient(to bottom, #408c99 5%, #599bb3 100%);
                background-color:#408c99;
        }
        .myButton:active {
                position:relative;
                top:1px;
        }
        body {
                text-indent: 50px;
                margin: 0;
                font-family: Arial, Helvetica, sans-serif;
        }
        .hero-image {
                background-image: url("background.png");
                background-color: #cccccc;
                height: auto;
                background-position: center;
                background-repeat: no-repeat;
                background-size: cover;
                position: relative;
        }
        .hero-image::before {
                content: "";
                position: absolute;
                top: 0px;
                right: 0px;
                bottom: 0px;
                left: 0px;
                background-color: rgba(0,0,0,0.30);
        }
        .list-text {
                padding-top:0px;
                line-height: 2.6;
                font-size: large;
                font-stretch: expanded;
                text-align: left;
                position: relative;
                top: 5%;
                color: white;
                text-shadow: 0px 1px 1px #555;
        }
        .tight-text {
                font-size: small;
                line-height: 1;
    }
        .normal-text {
                font-size: small;
                line-height: 1;
                padding-top:5px;
                text-align: left;
                position: relative;
                color: white;
                text-shadow: 0px 1px 1px #555;
                text-align: left;
        }
        .hero-text {
                text-align: left;
                position: relative;
                top: 8%;
                left: 50%;
                transform: translate(-50%, -50%);
                color: white;
                text-shadow: 9px 7px 6px rgba(176, 174, 174, 1);margin-top: -25px;
        }
        #header {
                background: url(header-image.png) ;
                color: #36567c;
                width: 3500px;
                height: 140px;
                margin-bottom: 0px;
        }
    .lbb { color:black; background-color: lightblue; }
</style>
</head>
<body>
<div id="header">.</div>
<div class="hero-image">
<div class="hero-text">
        <br><br><br><h1> Americas Partner Lab Admin Console - Barracuda WAF-as-a-Service</h1>
</div>
<br>
<br>
<div class="normal-text">
        Partner Edition. Beta Version 4.0
        This self-service lab allows Barracud SE's to spin up/spin down a WAFaaS training lab for partners.
</div>
<div class="normal-text">
        You are going to use Petstore and Badstore as your target applications to attack.
</div>
<div class="list-text">
Step 1: Start the server that runs <a href="http://badstore.cudathon.com:8080" target="_blank">Petstore API</a> and <a href="http://badstore.cudathon.com" target="_blank">Badstore</a>
<button type="button" class="myButton" onclick="doAjax('/start_backend', ajaxfunction1, statusarea1)">Start Server</button>
<button type="button" class="myButton" onclick="doAjax('/stop_backend', ajaxfunction1, statusarea1)">Stop Server</button>
<div id=statusarea1></div>
<div class="list-text">
        Step 2: Login to WAAS: waas-student<01 through 09>@bugbug.me / ******* ( SE will provide credentials )
</div>
<div class="list-text">
        For example, for student 3, your login name will be waas-student03@bugbug.me
</div>
<div class="list-text">
        <form id="form1" name="form1" action="/login" method="post" target="https://waas.barracudanetworks.com/applications">
                Username: <input id="username" name="username" type="text" value="waas-student01@bugbug.me"/> Password: <input id="password" name="password" type="text" value="serenitynow_insanitylater"/>
<!-- <input id="submit" name="submit" type="submit" class="myButton" value="Login to WAFaaS" onclick="doAjaxPost('/login', ajaxfunction1, statusarea2);" /> -->

        <button type="button" class="myButton" onclick="doAjaxPost('/login_ajax', ajaxfunction2, statusarea2)">Login Ajax</button>
        <a href="https://waas.barracudanetworks.com/applications" target="_blank">https://waas.barracudanetworks.com/applications</a>
        </form>
</div>
<div id=statusarea2></div>
<div class="list-text">
        Step 3: Clean up old apps ( must be logged in to do this )
        <button type="button" class="myButton" onclick="doAjax('/list_apps', ajaxfunction3, statusarea3)">List Apps</button>
        <button type="button" class="myButton" onclick="doAjax('/delete_apps', ajaxfunction3, statusarea3)">Start Fresh</button>
</div>
<div id=statusarea3></div>
<div class="list-text">
        Step 4: Start Learning! Click here for <a href="https://barracudacorp-my.sharepoint.com/:w:/r/personal/gmchugh_barracuda_com/_layouts/15/Doc.aspx?sourcedoc=%7BAD5E9B3A-16F4-4255-AA9E-68CFB624CEE7%7D&file=FINAL%20WAFaaS%20Lab%20Guide%20-%20Intermediate.docx&wdLOR=c7F1E9985-9F5E-4891-B551-FD5752FF5B05&action=default&mobileredirect=true" target="_blank"><b> BADSTORE LAB GUIDE </b></a> and <a href="http://52.53.255.67/moodle/mod/book/view.php?id=9" target="_blank"><b> PETSTORE API LAB GUIDE </b> ( barracuda / AWSDevdays***! ) </a><br>
</div>
<!-- petstore is barracuda / AWSDevdays123!  -->
<div class="list-text">
        <!--
    Step 5: Login to Kali here: <a href=ssh://ec2-user;--ssh-agent=eechpbnaifiimgajnomdipfaamobdfha@kali.brett1.com>ssh ec2-user@kali.brett1.com</a> ( SE will provide credentials )
        -->
    Step 5 ( Optional -you should probably skip this step): Login to Kali here: <a href=ssh:// ddd target="_blank">ssh ec2-user@kali.brett1.com</a> ( SE will provide credentials )
</div>
<div class="list-text">
    Step 6 - launch attacks against unprotected origin server ( aka the web server without a WAF in front of it )
</div>
<div class="list-text">
    Launch Hydra against badstore-origin.cudathon.com: <a href="https://partnerlab.cudathon.com/hydra_badstore-origin" target="_blank"> Hydra badstore-origin.cudathon.com!  </a>
</div>
<div class="list-text">
    Launch SqlMap against badstore-origin.cudathon.com: <a href="https://partnerlab.cudathon.com/sqlmap_badstore-origin" target="_blank"> Sqlmap badstore-origin.cudathon.com!  </a><br>
</div>
<div class="list-text">
    Step 7 - launch the same attacks against the WAFaaS proxy which is protecting the backend server
</div>
<div class="list-text">
    Launch Hydra ( repeat ~5 times & DDOS->Web Scraping->JS insertion ON ) against badstore-wafaas.cudathon.com: <a href="https://partnerlab.cudathon.com/hydra_badstore-wafaas" target="_blank"> Hydra badstore-wafaas.cudathon.com!  </a>
</div>
<div class="list-text">
    Launch SqlMap against badstore-wafaas.cudathon.com: <a href="https://partnerlab.cudathon.com/sqlmap_badstore-wafaas" target="_blank"> Sqlmap badstore-wafaas.cudathon.com!  </a>
</div>
<div class="lbb" id="statusarea"></div>

<script>

        function doAjax(url, cFunction, mydiv) {
                var xhttp;
                xhttp=new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                          cFunction(mydiv, this);
                        }
                };
                xhttp.open("GET", url, true);
                xhttp.send();
        }

        function doAjaxPost(url, cFunction, mydiv) {
                var xhttp;
                xhttp=new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                        //document.getElementById("statusarea1").innerHTML = this.readyState;
                        if (this.readyState == 4 && this.status == 200) {
                                cFunction(mydiv, this);
                        }
                };
                xhttp.open("POST", "/login", true);
                xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                var usernameValue = document.getElementById("username").value;
                var passwordValue = document.getElementById("password").value;
                xhttp.send('username=' + usernameValue + '&password=' + passwordValue);
        }

        function ajaxfunction1(mydiv, xhttp) {
                //mydiv problem it comes through as [object HTMLDivElement] and I can't seem to get the value of it so hard-coding the divs here
          document.getElementById("statusarea").innerHTML = xhttp.responseText;
        }
        function ajaxfunction2(mydiv, xhttp) {
          document.getElementById("statusarea").innerHTML = xhttp.responseText;
        }
        function ajaxfunction3(mydiv, xhttp) {
          document.getElementById("statusarea").innerHTML = xhttp.responseText;
        }

</script>

</body>
</html>
